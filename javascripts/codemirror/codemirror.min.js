var CodeMirrorConfig=window.CodeMirrorConfig||{},CodeMirror=function(){function g(b,g){this.options=g=g||{},a(g,CodeMirrorConfig),g.dumbTabs?g.tabMode="spaces":g.normalTab&&(g.tabMode="default"),g.cursorActivity&&(g.onCursorActivity=g.cursorActivity);var h=this.frame=c("iframe");g.iframeClass&&(h.className=g.iframeClass),h.frameBorder=0,h.style.border="0",h.style.width="100%",h.style.height="100%",h.style.display="block";var i=this.wrapping=c("div");i.style.position="relative",i.className="CodeMirror-wrapping",i.style.width=g.width,i.style.height=g.height=="dynamic"?g.minHeight+"px":g.height;var j=this.textareaHack=c("textarea");i.appendChild(j),j.style.position="absolute",j.style.left="-10000px",j.style.width="10px",j.tabIndex=1e5,h.CodeMirror=this,g.domain&&f?(this.html=e(g),h.src="javascript:(function(){document.open();"+(g.domain?'document.domain="'+g.domain+'";':"")+"document.write(window.frameElement.CodeMirror.html);document.close();})()"):h.src="javascript:;",b.appendChild?b.appendChild(i):b(i),i.appendChild(h),g.lineNumbers&&(this.lineNumbers=d(i,g.firstLineNumber)),this.win=h.contentWindow;if(!g.domain||!f)this.win.document.open(),this.win.document.write(e(g)),this.win.document.close()}function e(a){typeof a.parserfile=="string"&&(a.parserfile=[a.parserfile]),typeof a.basefiles=="string"&&(a.basefiles=[a.basefiles]),typeof a.stylesheet=="string"&&(a.stylesheet=[a.stylesheet]);var c=' spellcheck="'+(a.disableSpellcheck?"false":"true")+'"',d=['<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html'+c+"><head>"];d.push('<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7"/>');var e=a.noScriptCaching?"?nocache="+(new Date).getTime().toString(16):"";b(a.stylesheet,function(a){d.push('<link rel="stylesheet" type="text/css" href="'+a+e+'"/>')}),b(a.basefiles.concat(a.parserfile),function(b){/^https?:/.test(b)||(b=a.path+b),d.push('<script type="text/javascript" src="'+b+e+'"></script>')}),d.push('</head><body style="border-width: 0;" class="editbox"'+c+"></body></html>");return d.join("")}function d(a,b){var d=c("div"),e=c("div");d.style.position="absolute",d.style.height="100%";if(d.style.setExpression)try{d.style.setExpression("height","this.previousSibling.offsetHeight + 'px'")}catch(f){}d.style.top="0px",d.style.left="0px",d.style.overflow="hidden",a.appendChild(d),e.className="CodeMirror-line-numbers",d.appendChild(e),e.innerHTML="<div>"+b+"</div>";return d}function c(a){return document.createElementNS&&document.documentElement.namespaceURI!==null?document.createElementNS("http://www.w3.org/1999/xhtml",a):document.createElement(a)}function b(a,b){for(var c=0;c<a.length;c++)b(a[c])}function a(a,b){for(var c in b)a.hasOwnProperty(c)||(a[c]=b[c])}a(CodeMirrorConfig,{stylesheet:[],path:"",parserfile:[],basefiles:["util.js","stringstream.js","select.js","undo.js","editor.js","tokenize.js"],iframeClass:null,passDelay:200,passTime:50,lineNumberDelay:200,lineNumberTime:50,continuousScanning:!1,saveFunction:null,onLoad:null,onChange:null,undoDepth:50,undoDelay:800,disableSpellcheck:!0,textWrapping:!0,readOnly:!1,width:"",height:"300px",minHeight:100,autoMatchParens:!1,markParen:null,unmarkParen:null,parserConfig:null,tabMode:"indent",enterMode:"indent",electricChars:!0,reindentOnLoad:!1,activeTokens:null,onCursorActivity:null,lineNumbers:!1,firstLineNumber:1,onLineNumberClick:null,indentUnit:2,domain:null,noScriptCaching:!1,incrementalLoading:!1});var f=document.selection&&window.ActiveXObject&&/MSIE/.test(navigator.userAgent);g.prototype={init:function(){this.options.initCallback&&this.options.initCallback(this),this.options.onLoad&&this.options.onLoad(this),this.options.lineNumbers&&this.activateLineNumbers(),this.options.reindentOnLoad&&this.reindent(),this.options.height=="dynamic"&&this.setDynamicHeight()},getCode:function(){return this.editor.getCode()},setCode:function(a){this.editor.importCode(a)},selection:function(){this.focusIfIE();return this.editor.selectedText()},reindent:function(){this.editor.reindent()},reindentSelection:function(){this.focusIfIE(),this.editor.reindentSelection(null)},focusIfIE:function(){this.win.select.ie_selection&&document.activeElement!=this.frame&&this.focus()},focus:function(){this.win.focus(),this.editor.selectionSnapshot&&this.win.select.setBookmark(this.win.document.body,this.editor.selectionSnapshot)},replaceSelection:function(a){this.focus(),this.editor.replaceSelection(a);return!0},replaceChars:function(a,b,c){this.editor.replaceChars(a,b,c)},getSearchCursor:function(a,b,c){return this.editor.getSearchCursor(a,b,c)},undo:function(){this.editor.history.undo()},redo:function(){this.editor.history.redo()},historySize:function(){return this.editor.history.historySize()},clearHistory:function(){this.editor.history.clear()},grabKeys:function(a,b){this.editor.grabKeys(a,b)},ungrabKeys:function(){this.editor.ungrabKeys()},setParser:function(a,b){this.editor.setParser(a,b)},setSpellcheck:function(a){this.win.document.body.spellcheck=a},setStylesheet:function(a){typeof a==="string"&&(a=[a]);var b={},c={},d=this.win.document.getElementsByTagName("link");for(var e=0,f;f=d[e];e++)if(f.rel.indexOf("stylesheet")!==-1)for(var g=0;g<a.length;g++){var h=a[g];f.href.substring(f.href.length-h.length)===h&&(b[f.href]=!0,c[h]=!0)}for(var e=0,f;f=d[e];e++)f.rel.indexOf("stylesheet")!==-1&&(f.disabled=!(f.href in b));for(var g=0;g<a.length;g++){var h=a[g];if(!(h in c)){var f=this.win.document.createElement("link");f.rel="stylesheet",f.type="text/css",f.href=h,this.win.document.getElementsByTagName("head")[0].appendChild(f)}}},setTextWrapping:function(a){a!=this.options.textWrapping&&(this.win.document.body.style.whiteSpace=a?"":"nowrap",this.options.textWrapping=a,this.lineNumbers&&(this.setLineNumbers(!1),this.setLineNumbers(!0)))},setIndentUnit:function(a){this.win.indentUnit=a},setUndoDepth:function(a){this.editor.history.maxDepth=a},setTabMode:function(a){this.options.tabMode=a},setEnterMode:function(a){this.options.enterMode=a},setLineNumbers:function(a){a&&!this.lineNumbers?(this.lineNumbers=d(this.wrapping,this.options.firstLineNumber),this.activateLineNumbers()):!a&&this.lineNumbers&&(this.wrapping.removeChild(this.lineNumbers),this.wrapping.style.paddingLeft="",this.lineNumbers=null)},cursorPosition:function(a){this.focusIfIE();return this.editor.cursorPosition(a)},firstLine:function(){return this.editor.firstLine()},lastLine:function(){return this.editor.lastLine()},nextLine:function(a){return this.editor.nextLine(a)},prevLine:function(a){return this.editor.prevLine(a)},lineContent:function(a){return this.editor.lineContent(a)},setLineContent:function(a,b){this.editor.setLineContent(a,b)},removeLine:function(a){this.editor.removeLine(a)},insertIntoLine:function(a,b,c){this.editor.insertIntoLine(a,b,c)},selectLines:function(a,b,c,d){this.win.focus(),this.editor.selectLines(a,b,c,d)},nthLine:function(a){var b=this.firstLine();for(;a>1&&b!==!1;a--)b=this.nextLine(b);return b},lineNumber:function(a){var b=0;while(a!==!1)b++,a=this.prevLine(a);return b},jumpToLine:function(a){typeof a=="number"&&(a=this.nthLine(a)),this.selectLines(a,0),this.win.focus()},currentLine:function(){return this.lineNumber(this.cursorLine())},cursorLine:function(){return this.cursorPosition().line},cursorCoords:function(a){return this.editor.cursorCoords(a)},activateLineNumbers:function(){function p(){function t(){s&&clearTimeout(s),h.editor.allClean()?r():s=setTimeout(t,200)}function r(b){k(),n(b),a=e.firstChild,d=g.firstChild,i=0,f=h.options.firstLineNumber,q()}function q(){if(!!g.parentNode&&g.parentNode==h.lineNumbers){var c=(new Date).getTime()+h.options.lineNumberTime;while(a){o(f++,a.previousSibling);for(;a&&!b.isBR(a);a=a.nextSibling){var e=a.offsetTop+a.offsetHeight;while(g.offsetHeight&&e-3>i){var j=i;o("&nbsp;");if(i<=j)break}}a&&(a=a.nextSibling);if((new Date).getTime()>c){p(),s=setTimeout(q,h.options.lineNumberDelay);return}}while(d)o(f++);p(),k()}}function p(){for(var a=0;a<j.length;a+=2)j[a].innerHTML=j[a+1];j=[]}function o(a,b){d||(d=g.appendChild(c("div"))),m&&m(d,b,a),j.push(d),j.push(a),i=d.offsetHeight+d.offsetTop,d=d.nextSibling}var a,d,f,i,j=[],m=h.options.styleNumbers;r(!0);var s=null;h.updateNumbers=t;var u=b.addEventHandler(b,"scroll",k,!0),v=b.addEventHandler(b,"resize",t,!0);l=function(){s&&clearTimeout(s),h.updateNumbers==t&&(h.updateNumbers=null),u(),v()}}function o(){function a(){n(!0),k()}h.updateNumbers=a;var c=b.addEventHandler(b,"scroll",k,!0),d=b.addEventHandler(b,"resize",a,!0);l=function(){c(),d(),h.updateNumbers==a&&(h.updateNumbers=null)},a()}function n(b){var d=g.firstChild.offsetHeight;if(d!=0){var f=50+Math.max(e.offsetHeight,Math.max(a.offsetHeight,e.scrollHeight||0)),i=Math.ceil(f/d);for(var j=g.childNodes.length;j<=i;j++){var k=c("div");k.appendChild(document.createTextNode(b?String(j+h.options.firstLineNumber):"Â ")),g.appendChild(k)}}}function k(){f.scrollTop=e.scrollTop||d.documentElement.scrollTop||0}function j(){if(a.offsetWidth!=0){for(var c=a;c.parentNode;c=c.parentNode){}if(!f.parentNode||c!=document||!b.Editor){try{l()}catch(d){}clearInterval(m);return}f.offsetWidth!=i&&(i=f.offsetWidth,a.parentNode.style.paddingLeft=i+"px")}}var a=this.frame,b=a.contentWindow,d=b.document,e=d.body,f=this.lineNumbers,g=f.firstChild,h=this,i=null;f.onclick=function(a){var b=h.options.onLineNumberClick;if(b){var c=(a||window.event).target||(a||window.event).srcElement,d=c==f?NaN:Number(c.innerHTML);isNaN(d)||b(d,c)}};var l=function(){};j();var m=setInterval(j,500);(this.options.textWrapping||this.options.styleNumbers?p:o)()},setDynamicHeight:function(){function h(){var b=0,f=d.lastChild,h;while(f&&c.isBR(f))f.hackBR||b++,f=f.previousSibling;f?(e=f.offsetHeight,h=f.offsetTop+(1+b)*e):e&&(h=b*e),h&&(a.wrapping.style.height=Math.max(g+h,a.options.minHeight)+"px")}var a=this,b=a.options.onCursorActivity,c=a.win,d=c.document.body,e=null,f=null,g=2*a.frame.offsetTop;d.style.overflowY="hidden",c.document.documentElement.style.overflowY="hidden",this.frame.scrolling="no",setTimeout(h,300),a.options.onCursorActivity=function(a){b&&b(a),clearTimeout(f),f=setTimeout(h,100)}}},g.InvalidLineHandle={toString:function(){return"CodeMirror.InvalidLineHandle"}},g.replace=function(a){typeof a=="string"&&(a=document.getElementById(a));return function(b){a.parentNode.replaceChild(b,a)}},g.fromTextArea=function(a,b){function f(b){a.nextSibling?a.parentNode.insertBefore(b,a.nextSibling):a.parentNode.appendChild(b)}function c(){a.value=h.getCode()}typeof a=="string"&&(a=document.getElementById(a)),b=b||{},a.style.width&&b.width==null&&(b.width=a.style.width),a.style.height&&b.height==null&&(b.height=a.style.height),b.content==null&&(b.content=a.value);if(a.form){typeof a.form.addEventListener=="function"?a.form.addEventListener("submit",c,!1):a.form.attachEvent("onsubmit",c);var d=a.form.submit;function e(){c(),a.form.submit=d,a.form.submit(),a.form.submit=e}a.form.submit=e}a.style.display="none";var h=new g(f,b);h.save=c,h.toTextArea=function(){c(),a.parentNode.removeChild(h.wrapping),a.style.display="",a.form&&(a.form.submit=d,typeof a.form.removeEventListener=="function"?a.form.removeEventListener("submit",c,!1):a.form.detachEvent("onsubmit",c))};return h},g.isProbablySupported=function(){var a;return window.opera?Number(window.opera.version())>=9.52:/Apple Computer, Inc/.test(navigator.vendor)&&(a=navigator.userAgent.match(/Version\/(\d+(?:\.\d+)?)\./))?Number(a[1])>=3:document.selection&&window.ActiveXObject&&(a=navigator.userAgent.match(/MSIE (\d+(?:\.\d*)?)\b/))?Number(a[1])>=6:(a=navigator.userAgent.match(/gecko\/(\d{8})/i))?Number(a[1])>=20050901:(a=navigator.userAgent.match(/AppleWebKit\/(\d+)/))?Number(a[1])>=525:null};return g}()